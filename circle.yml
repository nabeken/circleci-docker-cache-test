machine:
  services:
    - docker

dependencies:
  cache_directories:
    - "~/docker"
  override:
    - "mkdir -p ~/docker"
    - "ls -alh ~/docker"
    - if [[ -e ~/docker/ubuntu.tar ]]; then docker load -i ~/docker/ubuntu.tar; else docker pull ubuntu:14.10 && docker save -o ~/docker/ubuntu.tar ubuntu:14.10; fi
    - if [[ -e ~/docker/golang.tar ]]; then docker load -i ~/docker/golang.tar; else docker pull golang:1.4 && docker save -o ~/docker/golang.tar golang:1.4; fi
    - if [[ -e ~/docker/postgres.tar ]]; then docker load -i ~/docker/postgres.tar; else docker pull postgres:9.4 && docker save -o ~/docker/postgres.tar postgres:9.4; fi
    - if [[ -e ~/docker/redis.tar ]]; then docker load -i ~/docker/redis.tar; else docker pull redis:2.8 && docker save -o ~/docker/redis.tar redis:2.8; fi
    - if [[ -e ~/docker/consul.tar ]]; then docker load -i ~/docker/consul.tar; else docker pull progrium/consul:consul-0.4 && docker save -o ~/docker/consul.tar progrium/consul:consul-0.4; fi
    - if [[ -e ~/docker/volume-container.tar ]]; then docker load -i ~/docker/volume-container.tar; else docker pull nabeken/docker-volume-container-rsync:latest && docker save -o ~/docker/volume-container.tar nabeken/docker-volume-container-rsync:latest; fi
    - "ls -alh ~/docker"

test:
  override:
    - /bin/true
